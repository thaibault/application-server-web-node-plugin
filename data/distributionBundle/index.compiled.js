'use strict';
(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b(require('babel-runtime/helpers/asyncToGenerator'),require('babel-runtime/core-js/get-iterator'),require('babel-runtime/regenerator'),require('babel-runtime/core-js/promise'),require('babel-runtime/helpers/classCallCheck'),require('http'),require('net'),require('web-node/pluginAPI.compiled'),function(){try{return require('source-map-support/register')}catch(a){}}()):'function'==typeof define&&define.amd?define('serverwebnodeplugin',['babel-runtime/helpers/asyncToGenerator','babel-runtime/core-js/get-iterator','babel-runtime/regenerator','babel-runtime/core-js/promise','babel-runtime/helpers/classCallCheck','http','net','web-node/pluginAPI.compiled','source-map-support/register'],b):'object'==typeof exports?exports.serverwebnodeplugin=b(require('babel-runtime/helpers/asyncToGenerator'),require('babel-runtime/core-js/get-iterator'),require('babel-runtime/regenerator'),require('babel-runtime/core-js/promise'),require('babel-runtime/helpers/classCallCheck'),require('http'),require('net'),require('web-node/pluginAPI.compiled'),function(){try{return require('source-map-support/register')}catch(a){}}()):a.serverwebnodeplugin=b(a['babel-runtime/helpers/asyncToGenerator'],a['babel-runtime/core-js/get-iterator'],a['babel-runtime/regenerator'],a['babel-runtime/core-js/promise'],a['babel-runtime/helpers/classCallCheck'],a.http,a.net,a['web-node/pluginAPI.compiled'],a['source-map-support/register'])})(this,function(a,b,c,d,e,f,g,h,i){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=2)}([function(a){a.exports=e},function(a){a.exports=f},function(a,b,c){c(3),a.exports=c(4)},function(a,b,c){'use strict';var d=c(0),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=c(1);b.__esModule=!0,b.Dummy=void 0;var g=b.Dummy=function(){function a(){(0,e.default)(this,a)}return a.serverRequest=function(a){return a},a}();b.default=g},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}var e=c(5),f=d(e),g=c(6),h=d(g),i=c(7),j=d(i),k=c(8),l=d(k),m=c(0),n=d(m),o=c(1),p=c(9),q=c(10),r=d(q);b.__esModule=!0,b.Server=void 0;try{c(11)}catch(a){}var s=b.Server=function(){function a(){(0,n.default)(this,a)}return a.loadService=function(){var a=(0,l.default)(h.default.mark(function a(b,c,d){return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!c.hasOwnProperty('server')){a.next=4;break}return a.next=3,new j.default(function(a,b){var e=[];d.server.application.hostName&&e.push(d.server.application.hostName),e.push(function(){console.info('Starting application server to listen on port "'+(d.server.application.port+'".')),a({name:'server',promise:new j.default(function(){return c.server})})});try{var f;(f=c.server.instance).listen.apply(f,[d.server.application.port].concat(e))}catch(a){b(a)}});case 3:return a.abrupt('return',a.sent);case 4:return a.abrupt('return',null);case 5:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),a.preLoadService=function(a,b,c){var d=this;return a.server={instance:(0,o.createServer)(function(){var e=(0,l.default)(h.default.mark(function e(f,g){return h.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,r.default.callStack('serverRequest',c,b,f,g,a);case 2:g.end();case 3:case'end':return d.stop();}},e,d)}));return function(){return e.apply(this,arguments)}}()),sockets:[]},a.server.instance.on('connection',function(b){a.server.sockets.push(b),b.on('close',function(){return a.server.sockets.splice(a.server.sockets.indexOf(b),1)})}),a},a.shouldExit=function(){var a=(0,l.default)(h.default.mark(function a(b){return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt('return',new j.default(function(a){b.server.instance.close(function(){delete b.server,a(b)});for(var c=b.server.sockets,d=Array.isArray(c),e=0,c=d?c:(0,f.default)(c);;){var g;if(d){if(e>=c.length)break;g=c[e++]}else{if(e=c.next(),e.done)break;g=e.value}var h=g;h.destroy()}}));case 1:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),a}();b.default=s},function(a){a.exports=b},function(a){a.exports=c},function(a){a.exports=d},function(b){b.exports=a},function(a){a.exports=g},function(a){a.exports=h},function(a){if('undefined'==typeof i){var b=new Error('Cannot find module "source-map-support/register"');throw b.code='MODULE_NOT_FOUND',b}a.exports=i}])});