'use strict';
(function(i,j){'object'==typeof exports&&'object'==typeof module?module.exports=j(require('http'),require('babel-runtime/core-js/promise'),require('babel-runtime/helpers/asyncToGenerator'),require('net'),function(){try{return require('source-map-support/register')}catch(l){}}(),require('web-node/pluginAPI.compiled')):'function'==typeof define&&define.amd?define('serverwebnodeplugin',['http','babel-runtime/core-js/promise','babel-runtime/helpers/asyncToGenerator','net','source-map-support/register','web-node/pluginAPI.compiled'],j):'object'==typeof exports?exports.serverwebnodeplugin=j(require('http'),require('babel-runtime/core-js/promise'),require('babel-runtime/helpers/asyncToGenerator'),require('net'),function(){try{return require('source-map-support/register')}catch(l){}}(),require('web-node/pluginAPI.compiled')):i.serverwebnodeplugin=j(i.http,i['babel-runtime/core-js/promise'],i['babel-runtime/helpers/asyncToGenerator'],i.net,i['source-map-support/register'],i['web-node/pluginAPI.compiled'])})(this,function(h,i,j,k,l,m){return function(n){function o(q){if(p[q])return p[q].exports;var r=p[q]={i:q,l:!1,exports:{}};return n[q].call(r.exports,r,r.exports,o),r.l=!0,r.exports}var p={};return o.m=n,o.c=p,o.i=function(q){return q},o.d=function(q,r,s){o.o(q,r)||Object.defineProperty(q,r,{configurable:!1,enumerable:!0,get:s})},o.n=function(q){var r=q&&q.__esModule?function(){return q['default']}:function(){return q};return o.d(r,'a',r),r},o.o=function(q,r){return Object.prototype.hasOwnProperty.call(q,r)},o.p='',o(o.s=8)}([function(n){n.exports=h},function(n,o,p){'use strict';o.__esModule=!0;p(0);o.default=class{static request(s){return s}}},function(n,o,p){'use strict';function q(A){return A&&A.__esModule?A:{default:A}}var r=p(3),s=q(r),t=p(4),u=q(t),v=p(0),w=p(5),x=p(7),y=q(x);o.__esModule=!0;try{p(6)}catch(A){}o.default=class{static shouldExit(A){return(0,u.default)(function*(){return new s.default(function(B){A.server.instance.close(function(){delete A.server,B(A)});for(const C of A.server.sockets)C.destroy()})})()}static preLoadService(A,B,C){return A.server={instance:(0,v.createServer)(function(){var D=(0,u.default)(function*(E,F){E=yield y.default.callStack('request',C,B,E,F,A),F.end()});return function(){return D.apply(this,arguments)}}()),sockets:[]},A.server.instance.on('connection',function(D){A.server.sockets.push(D),D.on('close',function(){return A.server.sockets.splice(A.server.sockets.indexOf(D),1)})}),A}static loadService(A,B,C){return(0,u.default)(function*(){return B.hasOwnProperty('server')?yield new s.default(function(D,E){const F=[];C.server.application.hostName&&F.push(C.server.application.hostName),F.push(function(){console.info('Starting application server to listen on port "'+`${C.server.application.port}".`),D({name:'server',promise:new s.default(function(){return B.server})})});try{B.server.instance.listen(C.server.application.port,...F)}catch(G){E(G)}}):null})()}}},function(n){n.exports=i},function(n){n.exports=j},function(n){n.exports=k},function(n){if('undefined'==typeof l){var p=new Error('Cannot find module "source-map-support/register"');throw p.code='MODULE_NOT_FOUND',p}n.exports=l},function(n){n.exports=m},function(n,o,p){p(1),n.exports=p(2)}])});